```plaintext
1. Import the combinations_with_replacement function from the itertools module.
2. Import the sys module for reading input.

3. Define the function LI() which returns a map object of integers obtained by reading a line from standard input, stripping any trailing whitespace, and splitting the line into components.

4. Read inputs N, M, and Q using the LI() function.

5. Declare a list Q_groups to store the groups of queries. Data type: list of lists of integers.

6. For each query in the range Q:
   a. Append a list created from the input obtained by calling LI() to Q_groups.

7. Declare an integer variable max_score and initialize it to 0.

8. Iterate over each combination p generated by combinations_with_replacement of the range from 1 to M + 1, with replacement, with length N:
   a. Declare an integer variable temp_score and initialize it to 0.
   b. Iterate over each query q in Q_groups:
      i. If the difference between the element at index q[1] - 1 and the element at index q[0] - 1 in p equals q[2]:
         - Increment temp_score by q[3].
   c. Update max_score to be the maximum of max_score and temp_score.

9. Output the value of max_score by printing it.
```
