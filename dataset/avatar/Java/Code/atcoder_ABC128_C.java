import java.util.* ; public class atcoder_ABC128_C { public static void main ( String [ ] args ) { atcoder_ABC128_C main = new atcoder_ABC128_C ( ) ; main.run ( ) ; } public void run ( ) { Scanner sc = new Scanner ( System.in ) ; int N = sc.nextInt ( ) ; int M = sc.nextInt ( ) ; ArrayList < Integer > a = new ArrayList < > ( ) ; for ( int i = 0 ; i < N ; i ++ ) { a.add ( 0 ) ; } for ( int i = 0 ; i < M ; i ++ ) { int k = sc.nextInt ( ) ; for ( int j = 0 ; j < k ; j ++ ) { int s = sc.nextInt ( ) ; s -- ; a.set ( s , a.get ( s ) | ( 1 << i ) ) ; } } int p = 0 ; for ( int i = 0 ; i < M ; i ++ ) { int x = sc.nextInt ( ) ; p |= ( x << i ) ; } int ans = 0 ; for ( int s = 0 ; s < ( 1 << N ) ; s ++ ) { int t = 0 ; for ( int i = 0 ; i < N ; i ++ ) { if ( ( ( s >> i ) & 1 ) == 1 ) { t ^= a.get ( i ) ; } } if ( p == t ) { ans ++ ; } } System.out.println ( ans ) ; sc.close ( ) ; } }
